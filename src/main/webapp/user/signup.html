<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>회원가입</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.js"></script>
</head>    
<body>
    <div class="wrap">
        <main class="container">
            <div class="row col-md-12 m-2">
            <div class="container clearfix p-2 text-center">
                <a href="index.html" class="float-center"><img src="img/free-icon-cookie-2682369.png" class="img-fluid" alt="로고" width="50px"></a>
                <span class="text-center fw-bold p-3" style="font-size: 32px;">Cookie new Cookie</span>
            </div>
            <form name="frm"class="mx-auto col-lg-5 card p-4 mt-5">
                <!-- 이메일 -->
                <div class="area-signup-form area-email d-grid">
                    <div class="form-floating mt-3">
                        <input type="text" class="form-control" id="email" placeholder name="email">
                        <label for="email">Email을 입력하세요.</label>
                    </div>
                    <button class="btn btn-cookie mt-3 btn-block" type="button" id="btnEmailVerify"><span class="spinner-border spinner-border-sm hide"></span> 이메일 인증</button>                    
                    <p class="text-danger small mb-0 hide">이미 사용중인 이메일 입니다.</p>
                    <div class="form-floating mt-3 hide">
                        <input type="text" class="form-control" id="authNum" placeholder name="authNum">
                        <label for="authNum">인증번호</label>
                    </div>
                    <button class="btn btn-cookie mt-3 btn-block hide" type="button">인증번호 확인</button>
                    <p class="text-danger small mb-0 hide">인증번호가 일치하지 않습니다.</p>
                </div>

                <!-- 아이디 -->
                <div class="area-signup-form area-id">
                    <div class="form-floating mt-3">
                        <input type="text" class="form-control" id="id" placeholder name="id">
                        <label for="id">아이디</label>
                    </div>
                    <button class="btn btn-cookie mt-3 btn-block" type="button"><span class="spinner-border spinner-border-sm"></span> 아이디 중복 확인</button>
                    <p class="text-danger small mb-0">이미 사용중인 아이디 입니다.</p>
                </div>

                <!-- 비밀번호 -->
                <div class="area-signup-form area-pw">
                    <div class="form-floating mt-3 position-relative">
                        <input type="password" class="form-control" id="password" placeholder name="password">
                        <label for="password">비밀번호</label>
                        <div class="position-absolute" style="top:18px; right:18px">
                            <a href="#" class="text-cookie-secondary"><i class="fa-regular fa-eye" title="비밀번호 보기"></i></a>
                            <a href="#" class="text-cookie-secondary  d-none"><i class="fa-regular fa-eye-slash" title="비밀번호 숨기기"></i></a>
                        </div>
                    </div>
                    <button class="btn btn-cookie mt-3 btn-block" type="button">입력</button>
                    <p class="text-danger small mb-0">비밀번호 규칙에 일치하지 않습니다.</p>
                </div>

                <!-- 이름 -->
                <div class="area-signup-form area-name">
                    <div class="form-floating mt-3">
                        <input type="text" class="form-control" id="name" placeholder name="name">
                        <label for="name">이름</label>
                    </div>
                    <button class="btn btn-cookie mt-3 btn-block" type="button">입력</button>
                    <p class="text-danger small mb-0">이름 규칙에 일치하지 않습니다.</p>
                </div>

                <!-- 닉네임 -->
                <div class="area-signup-form area-nick">
                    <div class="form-floating mt-3">
                        <input type="text" class="form-control" id="nick" placeholder name="nick">
                        <label for="nick">닉네임</label>
                    </div>
                    <button class="btn btn-cookie mt-3 btn-block" type="button">닉네임 중복 체크</button>
                    <p class="text-danger small mb-0">중복된 닉네임이 존재합니다.</p>
                </div>
                <!-- <button class="btn-test" type="button">테스트 버튼</button> -->
            </form>
        </main>
    </div>
    <script>
        // 초기 설정
        $(".area-signup-form").hide();

        // 비밀번호 가시성 토글
        $(".area-pw a").click(function() {
            event.preventDefault();
            const $pw = $(this).parent().find("a").toggleClass("d-none").closest(".area-pw").find("input");
            $pw.attr("type") == "password" ? $pw.attr("type", "text") : $pw.attr("type", "password") 
        })

        // 인증 이메일 발송
        $("#btnEmailVerify").click(function() {
            const duplicatePropsURL = '${cp}member/ajax';
            const sendEmailAndSessionCheckURL = '${cp}member/ajax';
            // 1. 이메일 중복 여부 확인
            let data = {email : $("#email").val()} 
            $.ajax(duplicatePropsURL, {
                data
            }).done(function(data) {
                if(data.result) {
                    console.log('가입가능')
                }
                else {
                    console.log('불가능')
                }
            })
            // 2. 이메일 발송 후 secret값 세션에 지정(제한 시간 5분)

            // 3. 유효한 secret값 일치 여부 확인

        })

        // $(".btn-test").click(function() {
        //     $(".area-id").slideToggle(200).toggleClass("d-grid")
        // })
    </script>    
</body>
</html>